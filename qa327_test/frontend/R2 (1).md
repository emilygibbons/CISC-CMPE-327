# Test Case R2
Test Data: 
```
test_user = User(  
email='test_frontend@test.com',  
name='test_frontend',  
password=generate_password_hash('test_frontend')  
)  
```  
```  
test_user_false1 = User(  
email='test_frontend@test.com',  
name='test_frontend',  
password=generate_password_hash('incorrect_password')  
)
```
## [GET]
#### Test Case R2.1 - If the user has logged in, redirect back to the user profile page

Mocking:  
  
 -  Mock backend.get_user to return a test_user instance  
  
Actions:  
  
 -  open /logout (to invalidate any logged-in sessions that may exist)  
 -  open /login  
 -  enter test_user's email into element  `#email`  
 -  enter test_user's password into element  `#password`  
 -  click element  `input[type="submit"]`  
 -  open /login again  
 -  validate that current page contains  `#welcome-header`  element
#### Test Case R2.2 - otherwise, show the user registration page
Mocking:  
  
 -  Mock backend.get_user to return a test_user instance  
  
Actions:  
  
 - open /logout (to invalidate any logged-in sessions that may exist)
 - open /register
 - validate that current page contains`#register-header`************
#### Test Case R2.3 - the registration page shows a registration form requesting: email, user name, password, password2
Actions:  
  
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
-  validate that current page contains  `#email`  element  
- validate that current page contains  `#name`  element  **********
-  validate that current page contains  `#password`  element
- validate that current page contains  `#password2`  element  
## [GET]
#### Test Case R2.4 - The registration form can be submitted as a POST request to the current URL (/register)
Mocking:  
  
-  Mock backend.get_user to return a test_user instance  
  
Actions:  *****************
  
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
-  validate that current page contains  `#email`  element
-  validate that current page contains  `#name`  element
-  validate that current page contains  `#password`  element
-  validate that current page contains  `#password2`  element
-  enter test_user's email into element  `#email`  
- enter test_user's username into element  `#name`  
-  enter test_user's password into element  `#password`  
- enter test_user's password into element  `#password2` 
-  validate that current page contains  `#submit`  button  ********** is this same for register?
-  validate that  `#submit`  button points to `#http://127.0.0.1:8081/`
#### Test Case R2.5 - Email, password, password2 all have to satisfy the same requirements as defined in R1
Mocking:  
  
-  Mock backend.get_user to return a test_user instance

Actions:  **********does this include not being empty
 -  open /logout (to invalidate any logged-in sessions that may exist)  
 -  open /register
##### Check that fields are not empty: *****do i need to do this for every combination of entries
 -  click element  `input[type="submit"]`  
 -  validate that current page contains  `#Please-fill-out-this-field`  
 -  enter test_user's email into element  `#email`  
 -  click element  `input[type="submit"]`  
 -  validate that current page contains  `#Please-fill-out-this-field`
 - clear element `#email`
 -  enter test_user's password into element  `#password`  
 -  click element  `input[type="submit"]`  
 -  validate that current page contains  `#Please-fill-out-this-field`
##### Check that email follows addr-spec defined in RFC 5322:
 -  enter test_user's email into element  `#email`  
 - validate that the `#email` element meets regex `"(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)"`
 ##### Check if password and password2 have minimum length 6, at least one upper case, at least one lower case, and at least one special character:
 -  enter test_user's password into element  `#password`  
 - enter test_user's password into element  `#password2` 
 - validate that `#password` and `#password2` elements both have >= 6  characters  
 -  validate that `#password` and `#password2` elements both have >= 1 uppercase  
 - validate that `#password` and `#password2` elements both have >= 1 lower case  
 - validate that `#password` and `#password2` elements both  have >= 1 special character
 
 #### Test Case R2.6 - Password and password2 have to be exactly the same
 Mocking:  
  
-  Mock backend.get_user to return a test_user instance
Actions:  
  
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
-  validate that current page contains  `#email`  element  ****do i need to validate these again
- validate that current page contains  `#name`  element  
-  validate that current page contains  `#password`  element
- validate that current page contains  `#password2`  element  
- enter test_user's email into element  `#email`  
-   enter test_user's username into element  `#name`  ****

 -  enter test_user's password into element  `#password`  
 - enter test_user's password into element  `#password2` 
 - validate that the `#password` element == `#password2` element****?
 
 #### Test Case R2.7 - User name has to be non-empty, alphanumeric-only, and space allowed only if it is not the first or the last character.
Mocking:  
  
-  Mock backend.get_user to return a test_user instance

Actions:  
  
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
- validate that `#name` element is non-empty*****lol (!=0)
- validate that `#name` element contains only letters and numbers *** regex? or 0 spec. char.
- validate that `#name` element does not contain space at start or end****

 #### Test Case R2.8 - User name has to be longer than 2 characters and less than 20 characters.
 
Mocking:  
  
-  Mock backend.get_user to return a test_user instance

Actions:  
  
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
- enter test_user'sn username into element  `#name`
- validate that the `#name` element has > 2 characters
- validate that the `#name` element has < 20 characters

#### Test Case R2.10 - For any formatting errors, redirect back to /login and show message '{} format is incorrect.'.format(the_corresponding_attribute) 
#### Positive: 
Actions: 

-  open /logout (to invalidate any logged-in sessions that may exist)  
- open /register
-  validate that element `#email` form exists  
- validate that element `#name` form exists  
-  validate that element `#password` form exists 
- validate that element `#password2` form exists  
- open /login *** how to redirect to login? do i show error msg?

#### Negative:
Actions:
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
-  validate that element `#email` form does not exist  
- validate that element `#name` form does not exist  
-  validate that element `#password` form does not exist 
- validate that element `#password2` form does not exist  
- open /login **redirect?
- validate that error message `'{} format is incorrect.'.format(the_corresponding_attribute)` is displayed


#### Test Case R2.11 - If the email already exists, show message 'this email has been ALREADY used'
Mocking:  
  
-  Mock backend.get_user to return a test_user instance

Actions: 
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
- enter test_user's email into element  `#email`  
- if email already in system validate error message `this email has been ALREADY used`

#### Test Case R2.12 - If no error regarding the inputs following the rules above, create a new user, set the balance to 5000, and go back to the /login page
Mocking:  
  
-  Mock backend.get_user to return a test_user instance

Actions:
-  open /logout (to invalidate any logged-in sessions that may exist)  
-  open /register
- validate there is no error message displayed ****
- balance element == 5000 ****
- open /login
